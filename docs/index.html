<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="p5.js"></script>
    <script src="p5.sound.min.js"></script>
    <meta charset="utf-8" />
    <style>
      /* Reset and base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: url('4k-noise.jpg') repeat;
        min-height: 100vh;
        font-family: 'Courier New', Courier, monospace;
        color: #fff;
        overflow-x: hidden;
      }

      /* Neon glow effect */
      .neon {
        color: #fff;
        text-shadow:
          0 0 5px #fff,
          0 0 10px #fff,
          0 0 20px #ff00de,
          0 0 30px #ff00de,
          0 0 40px #ff00de,
          0 0 50px #ff00de,
          0 0 60px #ff00de,
          0 0 70px #ff00de;
      }

      /* Glitch effect */
      .glitch {
        position: relative;
        font-size: 3em;
        font-weight: bold;
        animation: glitch 1s infinite;
      }

      .glitch::before,
      .glitch::after {
        content: attr(data-text);
        position: absolute;
        left: 0;
      }

      .glitch::before {
        animation: glitchTop 1s infinite;
        clip: rect(0, 900px, 0, 0);
      }

      .glitch::after {
        animation: glitchBottom 1s infinite;
        clip: rect(0, 900px, 0, 0);
      }

      @keyframes glitch {
        0% {
          transform: none;
        }
        20% {
          transform: skew(0.5deg);
        }
        40% {
          transform: skew(-0.5deg);
        }
        60% {
          transform: skew(0.5deg);
        }
        80% {
          transform: skew(-0.5deg);
        }
        100% {
          transform: none;
        }
      }

      @keyframes glitchTop {
        0% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(-2px, -2px);
        }
        20% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(2px, 2px);
        }
        40% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(-2px, -2px);
        }
        60% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(2px, 2px);
        }
        80% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(-2px, -2px);
        }
        100% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(0, 0);
        }
      }

      @keyframes glitchBottom {
        0% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(2px, 2px);
        }
        20% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(-2px, -2px);
        }
        40% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(2px, 2px);
        }
        60% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(-2px, -2px);
        }
        80% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(2px, 2px);
        }
        100% {
          clip: rect(0, 900px, 0, 0);
          transform: translate(0, 0);
        }
      }

      /* Typewriter effect */
      .typewriter h2 {
        overflow: hidden;
        border-right: .15em solid #ff00de;
        white-space: nowrap;
        margin: 0 auto;
        letter-spacing: .15em;
        animation:
          typing 3.5s steps(40, end),
          blink-caret .75s step-end infinite;
      }

      @keyframes typing {
        from { width: 0 }
        to { width: 100% }
      }

      @keyframes blink-caret {
        from, to { border-color: transparent }
        50% { border-color: #ff00de; }
      }

      /* Cursor trail effect */
      .trail {
        position: fixed;
        width: 10px;
        height: 10px;
        background-color: #ff00de;
        border-radius: 50%;
        pointer-events: none;
        mix-blend-mode: difference;
      }

      /* Styling for main content */
      .wide-video-container {
        width: 100%;
        overflow: hidden;
      }

      video.top-video {
        width: 100%;
      }

      main {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        position: relative;
        z-index: 2;
      }

      h1, h2, h3 {
        margin-bottom: 1rem;
        font-family: 'Courier New', Courier, monospace;
      }

      p, ul {
        margin-bottom: 1rem;
      }

      ul {
        list-style: none;
      }

      ul li::before {
        content: '→ ';
        color: #ff00de;
      }

      .signup-link {
        display: inline-block;
        background-color: #ff00de;
        color: #fff;
        padding: 0.5rem 1rem;
        text-decoration: none;
        border-radius: 4px;
        margin-top: 1rem;
        transition: background-color 0.3s;
      }

      .signup-link:hover {
        background-color: #fff;
        color: #ff00de;
      }

      /* Image grid hover effects */
      .image-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        min-width: 100vw;
        position: relative;
        z-index: 1;
        perspective: 1000px;
      }

      .image-item {
        flex: 0 0 auto;
        margin: 2px;
        z-index: 1;
        width: 200px;
        height: 200px;
        transition: transform 0.3s, filter 0.3s;
      }

      .image-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        backface-visibility: hidden;
      }

      .image-item:hover {
        z-index: 100;
        filter: brightness(1.2);
      }

      /* Background animation */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, transparent, #000 70%);
        mix-blend-mode: overlay;
        pointer-events: none;
        animation: pulse 5s infinite;
      }

      @keyframes pulse {
        0% {
          opacity: 0.5;
        }
        50% {
          opacity: 1;
        }
        100% {
          opacity: 0.5;
        }
      }

      /* Scrollbar styling */
      ::-webkit-scrollbar {
        width: 10px;
      }

      ::-webkit-scrollbar-track {
        background: #000;
      }

      ::-webkit-scrollbar-thumb {
        background: #ff00de;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #fff;
      }
    </style>
  </head>
  <body>
    <div class="wide-video-container">
      <video class="top-video" src="assets/vera.webm" autoplay muted loop playsinline></video>
    </div>

    <main>
      <h1 class="glitch" data-text="LABRACADABRA">LABRACADABRA</h1>
      <div class="typewriter">
        <h2>The Untold Histories of the Future</h2>
      </div>
      <p>Hack/Festival at MIT Media Lab</p>

      <h2 class="neon">October 15–18, 2024</h2>

      <h3>October 15–17</h3>
      <ul>
        <li>Hackathon: E14-643</li>
        <li>Time Capsules / Workshops with Alumni</li>
        <li>Exhibition of previous projects</li>
      </ul>

      <h3>October 18, 2024 6pm – 1am</h3>
      <ul>
        <li>Party (Labaret: perform or perish): E14-300</li>
        <li>Exhibition and Performances</li>
      </ul>

      <h2 class="neon">WHAT IS LABRACADBRA?</h2>
      <p>Labracadabra: The Untold Histories of the Future is a new kind of event in the MIT Media Lab, where students, faculty and alumni will dive into four decades of impactful, playful, and quirky past to reimagine the future.</p>

      <p>Labracadabra is:</p>
      <ul>
        <li>a HACKATHON where current students reimagine / recreate / revisit past Media Lab projects using new technologies and fresh perspectives.</li>
        <li>hands-on WORKSHOPS by distinguished alumni from various eras of the lab discussing pioneering projects or interesting topics that were ahead of their time and/or out of the ordinary</li>
        <li>an EXHIBITION showcasing historic Media Lab work as well as shining light on the untold stories that make up the lab.</li>
        <li>the legendary 99F PARTY to cap off the week</li>
      </ul>

      <h2 class="neon">WHYYYYY?</h2>
      <p>Bring back the MAGIC of the lab by HACKing TOGETHER across TIME</p>

      <h2>More Information</h2>
      <ul>
        <li>RSVP: to the Hackathon and/or Party</li>
        <li>Contribute: (travel/stay reimbursements)</li>
        <li>Visit: tips for hotels etc</li>
      </ul>

      <a href="https://docs.google.com/forms/d/e/1FAIpQLSfrimrYRo63dSFQALbGU1E_iABYiCjCM1PR3Z3k2DqfmO1Gmw/viewform?usp=sharing" class="signup-link neon">Sign up here</a>
    </main>

    <div class="image-grid">
      <!-- Images will be dynamically added here -->
    </div>

    <!-- Cursor trail elements -->
    <div id="cursor"></div>


    <script>
      // Cursor trail effect
      const cursor = document.createElement('div');
      cursor.classList.add('trail');
      document.body.appendChild(cursor);

      document.addEventListener('mousemove', e => {
        cursor.style.left = e.clientX + 'px';
        cursor.style.top = e.clientY + 'px';
      });

      // Image grid code (same as before)
      const imageGrid = document.querySelector('.image-grid');

      async function getImageFiles() {
        const apiUrl = 'https://api.github.com/repos/mitmedialab/labracadabra/contents/docs/assets/photodump';
        const rawContentUrl = 'https://raw.githubusercontent.com/mitmedialab/labracadabra/main/docs/assets/photodump/';

        try {
          const response = await fetch(apiUrl);
          if (!response.ok) throw new Error('Failed to fetch directory contents');
          const data = await response.json();
          
          return data
            .filter(file => file.type === 'file' && file.name.match(/\.(jpe?g|png|gif)$/i))
            .map(file => rawContentUrl + file.name)
            .sort(() => Math.random() - 0.5);
        } catch (error) {
          console.error('Error fetching image files:', error);
          return [];
        }
      }

      // Function to create and add image elements
      function addImageToGrid(imageSrc) {
        const img = document.createElement('img');
        img.src = imageSrc;
        img.alt = `Image`;
        img.onerror = () => img.style.display = 'none'; // Hide image if it fails to load

        const div = document.createElement('div');
        div.className = 'image-item';
        // Random rotation
        div.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;

         // Add hover effect
        div.addEventListener('mouseenter', () => {
          div.style.transform = `scale(2)`;
          div.style.height = `auto`;
        });
        div.addEventListener('mouseleave', () => {
          div.style.transform = `scale(1) rotate(${Math.random() * 20 - 10}deg)`;
          div.style.height = `200px`;
        });

        div.appendChild(img);
        imageGrid.appendChild(div);
      }

      // Main function to load and display images
      async function loadImages() {
        const imageFiles = await getImageFiles();
        imageFiles.forEach(addImageToGrid);
      }

      // Call the main function
      loadImages();
    </script>
  </body>
</html>
